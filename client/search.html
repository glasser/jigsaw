<template name='searchPage'>
  {{#if showing}}
    <h3>Puzzles {{searchDescription}}
      <button class='btn show-add-puzzle'>add puzzle</button></h3>
    <table class="table table-striped">
      <tr>
        <th>Puzzle</th>
        {{#each allFamilies}}
          <th>{{name}}</th>
        {{/each}}
         <th>Tags</th>
        {{!-- XXX show meta --}}
      </tr>
      {{#each search}}
        <tr>
          <td><a href="/puzzle/{{_id}}">{{title}}</a></td>
          {{#each allFamilies}}
            <td>
              {{#with familyValue ../_id}}
                {{#if this}}
                  <a href="/search/{{../../name}}={{this}}">{{this}}</a>
                {{/if}}
              {{/with}}
            </td>
          {{/each}}

          <td>
            {{#each sorted tags}}
              <span class='tag'><a href="/search/tag={{this}}">{{this}}</a></span>
            {{/each}}
          </td>
          {{!-- XXX show meta --}}
        </tr>
      {{/each}}
    </table>
  {{/if}}
</template>
