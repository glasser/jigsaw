<head>
  <title>jigsaw</title>
</head>

<body>
  <h1>Jigsaw</h1>

  {{> userPanel}}

  {{> puzzlePage}}
</body>

<template name='userPanel'>
  <div>
    {{#if loggingIn}}
      Logging in...
    {{else}}
      You are:
      {{#if currentUser}}
        <span class='username'>{{currentUser.username}}</span>.
        {{#unless showDirectory}}
          <button class='btn btn-mini' id='show-change-username'>change</button>
        {{/unless}}
      {{else}}
        nobody. Please log in:
      {{/if}}
    {{/if}}
    {{#if showDirectory}}
      <select id='directory'>
        {{#each users}}
          <option {{#if current}}selected{{/if}}>{{username}}</option>
        {{/each}}
      </select>
      or other:
      <input type='text' id='username-other' autocomplete='off'>
      <button class='btn btn-primary' id='change-username'>set name</button>
    {{/if}}
  </div>
</template>
